{"version":3,"sources":["01_main.js"],"names":["sliderMain","container","document","querySelector","swiper","Swiper","slidesPerView","spaceBetween","mousewheel","direction","effect","simulateTouch","on","reachEnd","disable","style","overflowY","window","addEventListener","handlePageScroll","handleTouchStart","passive","handleTouchMove","handleTouchEnd","touchStartY","touchEndY","e","touches","clientY","preventDefault","sliderRect","getBoundingClientRect","deltaY","console","log","top","enable","removeEventListener","$","ready","click","addClass","removeClass","mouseenter","$this","this","$animation","find","offset","x","pageX","left","y","pageY","css","mousemove","isClicked","createTimeline","matchMedia","matches","myTimeline","kill","params","mainItemsY","mainItemsScale","gsap","timeline","scrollTrigger","trigger","start","end","scrub","pin","pinSpacing","to","opacity","ease","scale","allFilled","each","$input","$formGroup","closest","val","trim","registerPlugin","ScrollTrigger","$main","originalBg","data","newBg"],"mappings":"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","file":"../js/main.min.js","sourcesContent":["function sliderMain() {\r\n    const container = document.querySelector('.main__slider');\r\n    const swiper = new Swiper('.main__slider .mySwiper', {\r\n        slidesPerView: 1,\r\n        spaceBetween: 0,\r\n        mousewheel: true,\r\n        direction: \"vertical\",\r\n        effect: \"fade\",\r\n        simulateTouch: true, // убедитесь, что свайпы работают\r\n        on: {\r\n            reachEnd: () => {\r\n                swiper.mousewheel.disable();\r\n\r\n                container.style.overflowY = 'auto';\r\n\r\n                // Для ПК\r\n                window.addEventListener('wheel', handlePageScroll);\r\n\r\n                // Для мобилок — слушаем на контейнере\r\n                container.addEventListener('touchstart', handleTouchStart, { passive: false });\r\n                container.addEventListener('touchmove', handleTouchMove, { passive: false });\r\n                container.addEventListener('touchend', handleTouchEnd);\r\n            }\r\n        }\r\n    });\r\n\r\n    // Объявляем переменные для касаний\r\n    let touchStartY = 0;\r\n    let touchEndY = 0;\r\n\r\n    // Обработчик начала касания\r\n    function handleTouchStart(e) {\r\n        touchStartY = e.touches[0].clientY;\r\n        // console.log('touchstart', touchStartY);\r\n    }\r\n\r\n    // Обработчик движения пальца\r\n    function handleTouchMove(e) {\r\n        touchEndY = e.touches[0].clientY;\r\n        const deltaY = touchStartY - touchEndY;\r\n\r\n        // Блокируем прокрутку страницы при свайпе вверх\r\n        if (deltaY > 0) {\r\n            e.preventDefault();\r\n            // console.log('preventDefault при свайпе вверх');\r\n        }\r\n        // при свайпе вниз ничего не делаем, чтобы страница могла прокрутиться\r\n    }\r\n\r\n    // Обработчик окончания касания\r\n    function handleTouchEnd(e) {\r\n        const sliderRect = container.getBoundingClientRect();\r\n        const deltaY = touchStartY - touchEndY;\r\n\r\n        // Лог для отладки\r\n        console.log('touchEnd', {\r\n            top: sliderRect.top,\r\n            deltaY: deltaY\r\n        });\r\n\r\n        // Если слайдер виден и пользователь свайпнул вниз\r\n        if (sliderRect.top >= 0 && deltaY < 0) {\r\n            // Включаем прокрутку страницы\r\n            swiper.mousewheel.enable();\r\n\r\n            // Разрешаем скролл контейнера (страницы)\r\n            container.style.overflowY = 'auto';\r\n\r\n            // Удаляем слушатели, чтобы не мешали\r\n            window.removeEventListener('wheel', handlePageScroll);\r\n            container.removeEventListener('touchstart', handleTouchStart);\r\n            container.removeEventListener('touchmove', handleTouchMove);\r\n            container.removeEventListener('touchend', handleTouchEnd);\r\n\r\n            // Лог для отладки\r\n            console.log('Возврат к скроллу страницы: включаем скролл и разблокируем');\r\n        }\r\n        // Иначе ничего не делаем, чтобы оставить блокировку при свайпе вверх\r\n    }\r\n\r\n    // Обработчик скролла страницы (ПК)\r\n    function handlePageScroll(e) {\r\n        const sliderRect = container.getBoundingClientRect();\r\n        if (sliderRect.top >= 0 && e.deltaY < 0) {\r\n            // Пользователь прокручивает вверх, когда слайдер виден\r\n            swiper.mousewheel.enable();\r\n\r\n            // Разрешаем скролл контейнера\r\n            container.style.overflowY = 'hidden';\r\n\r\n            // Удаляем слушатели\r\n            window.removeEventListener('wheel', handlePageScroll);\r\n            container.removeEventListener('touchstart', handleTouchStart);\r\n            container.removeEventListener('touchmove', handleTouchMove);\r\n            container.removeEventListener('touchend', handleTouchEnd);\r\n\r\n            // Лог для отладки\r\n            console.log('handlePageScroll: возвращаем скролл');\r\n        }\r\n    }\r\n\r\n    // Изначально блокируем скролл страницы\r\n    container.style.overflowY = 'hidden';\r\n}\r\n\r\n$(document).ready(function () {\r\n    sliderMain();\r\n\r\n    // Menu\r\n    $('.burger').click(function () {\r\n        $('.menu').addClass('menu--active')\r\n        $('body').addClass('fixed-body')\r\n    })\r\n\r\n    $('.menu__close').click(function () {\r\n        $('.menu').removeClass('menu--active')\r\n        $('body').removeClass('fixed-body')\r\n    })\r\n\r\n    // Btn-animation\r\n    $(\".btn-animation\").mouseenter(function(e) {\r\n        var $this = $(this);\r\n        var $animation = $this.find(\".circle\");\r\n        var offset = $this.offset();\r\n        var x = e.pageX - offset.left;\r\n        var y = e.pageY - offset.top;\r\n        $animation.css({\r\n            top: y + 'px',\r\n            left: x + 'px'\r\n        });\r\n    });\r\n\r\n    $(\".btn-animation\").mousemove(function(e) {\r\n        var $this = $(this);\r\n        var $animation = $this.find(\".circle\");\r\n        var offset = $this.offset();\r\n        var x = e.pageX - offset.left;\r\n        var y = e.pageY - offset.top;\r\n        $animation.css({\r\n            top: y + 'px',\r\n            left: x + 'px'\r\n        });\r\n    });\r\n\r\n    // Form\r\n    let isClicked = false;\r\n\r\n    $('.form').on('submit', function(e) {\r\n        e.preventDefault();\r\n\r\n        isClicked = true;\r\n        let allFilled = true;\r\n\r\n        $(this).find('.form-group input').each(function() {\r\n            const $input = $(this);\r\n            const $formGroup = $input.closest('.form-group');\r\n\r\n            if ($input.val().trim() === '') {\r\n                $formGroup.addClass('form-group--active');\r\n                allFilled = false;\r\n            } else {\r\n                $formGroup.removeClass('form-group--active');\r\n            }\r\n        });\r\n    });\r\n\r\n    $('.form-group input').on('input', function() {\r\n        if (isClicked) {\r\n            const $input = $(this);\r\n            const $formGroup = $input.closest('.form-group');\r\n\r\n            if ($input.val().trim() === '') {\r\n                $formGroup.addClass('form-group--active');\r\n            } else {\r\n                $formGroup.removeClass('form-group--active');\r\n            }\r\n        }\r\n    });\r\n\r\n    // Animation\r\n    gsap.registerPlugin(ScrollTrigger);\r\n\r\n    // Main\r\n    function getAnimationParams() {\r\n        const isMobile = window.matchMedia('(max-width: 1200px)').matches;\r\n        if (isMobile) {\r\n            return {\r\n                mainItemsY: -250,\r\n                mainItemsScale: 1.2,\r\n            };\r\n        } else {\r\n            return {\r\n                mainItemsY: -350,\r\n                mainItemsScale: 1.6,\r\n            };\r\n        }\r\n    }\r\n\r\n    function createTimeline() {\r\n        if (window.matchMedia('(max-width: 992px)').matches) {\r\n            if (window.myTimeline) {\r\n                window.myTimeline.kill();\r\n                window.myTimeline = null;\r\n            }\r\n            return;\r\n        }\r\n\r\n        const params = getAnimationParams();\r\n\r\n        if (window.myTimeline) {\r\n            window.myTimeline.kill();\r\n        }\r\n\r\n        window.myTimeline = gsap.timeline({\r\n            scrollTrigger: {\r\n                trigger: \".main\",\r\n                start: \"top top\",\r\n                end: \"bottom top\",\r\n                scrub: true,\r\n                pin: true,\r\n                pinSpacing: false,\r\n            }\r\n        })\r\n            .to(\".main__title\", {\r\n                opacity: 0,\r\n                ease: \"power1.out\",\r\n            }, 0)\r\n            .to(\".main__btn\", {\r\n                y: -100,\r\n                opacity: 0,\r\n                scale: 0.8,\r\n                ease: \"power1.inOut\",\r\n            }, 0)\r\n            .to(\".main__items\", {\r\n                y: params.mainItemsY,\r\n                scale: params.mainItemsScale,\r\n                ease: \"power1.inOut\",\r\n            }, 0);\r\n    }\r\n\r\n    createTimeline();\r\n\r\n    window.addEventListener('resize', () => {\r\n        createTimeline();\r\n    });\r\n\r\n    if (!window.matchMedia('(max-width: 992px)').matches) {\r\n        var $main = $('.main');\r\n        var originalBg = $main.data('background');\r\n\r\n        $main.css('background-image', 'url(' + originalBg + ')');\r\n\r\n        $('.main__item').on('mouseenter', function() {\r\n            var newBg = $(this).data('background');\r\n            $main.css('background-image', 'url(' + newBg + ')');\r\n        });\r\n\r\n        $('.main__item').on('mouseleave', function() {\r\n            $main.css('background-image', 'url(' + originalBg + ')');\r\n        });\r\n    }\r\n\r\n    // Main-mob\r\n\r\n\r\n})\r\n\r\n"]}